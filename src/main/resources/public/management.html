<html>
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="description" content="Knowledgebase 2.0"/>
    <meta name="author" content="Ronny Friedland"/>
    <title>Knowledgebase 2.0</title>
    <link rel="icon" href="/images/icon.gif" type="image/gif" />

    <link rel="stylesheet" href="/bootstrap.min.css" />
    <link rel="stylesheet" href="/bootstrap-theme.min.css"/>
    <link rel="stylesheet" href="/knowledgebase.css"/>
    <link rel="stylesheet" href="jstree/themes/default/style.min.css" />

    <script src="/jquery-1.11.2.min.js"></script>
    <script src="/bootstrap.min.js"></script>
    <script src="/knowledgebase.js"></script>
    <script src="/jstree/jstree.min.js"></script>

    <script type="text/javascript">
      jQuery( document ).ready(function() {
        jQuery('#metadata').jstree({
            'plugins' : ['themes','sort','types'],
            'core' : {
              'data' : {
                'url' : '/data/management/metadata',
                'dataType' : 'json'
              },
              'sort' : function (a, b) {
                return this.get_text(a) > this.get_text(b) ? 1 : -1;
              }
            }
         })
         .on('changed.jstree', function (e, data) {
            if(data && data.selected && data.selected.length) {
                jQuery.get('/data/management/metadata/' + data.selected.join(':'), function (d) {
                    var text = "";
                    jQuery.each(d.metadata, function(idx, obj) {
                        text += obj.key;
                        text += ":";
                        text += obj.value;
                        text += "<br/>";
                    });
                    jQuery('#metadatadetails').text(text);
                });
            }
          });
        });
    </script>
  </head>
  <body role="document">

    <nav class="navbar navbar-default">
      <div class="container">
        <div class="navbar-header">
          <div class="navbar-brand" href="/">Knowledgebase 2.0 Management</div>
        </div>
        <div class="navbar-collapse">
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">


        <div id="metadata" class="col-sm-3"></div>
        <div id="metadatadetails" class="col-sm-9"></div>

    </div>

    <div class="container">
      <footer>
        <p>Version: ${project.version}</p>
      </footer>
    </div>

  </body>
</html>
